import{i as $,r as x,l as I,o as s,c as f,w as C,T as D,a as c,b as e,t as S,u as v,d as g,e as L,F as b,n as w,f as B,g as O,h as M,j as A,p as E,k as V,m as H,v as j,q as F,G as q,s as P,V as G,x as R,y as z,z as J,A as U}from"./vendor.5f4f0a2b.js";const K=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}};K();const W={class:"container text-center"},Q={class:"description my-2"},X={class:"my-2"},Y=e("hr",null,null,-1),Z=e("h4",{class:"my-1"},"Aprendizajes esperados",-1),tt={class:"mb-2"},et=e("h4",{class:"my-1"},"Contenido central",-1),st={class:"mb-2"},nt=["data-animation-path","data-name"],at={emits:["start"],setup(n,{emit:l}){const a=$("activityFile");$("statusFile");const o=x(),t=x(!0),r=()=>{t.value=!1},d=()=>{l("start")};return I.searchAnimations(),(_,y)=>(s(),f(D,{name:"zoom",onAfterLeave:d},{default:C(()=>[t.value?(s(),c("div",{key:0,class:"dialog intro",ref:(u,m)=>{m.introContainer=u,o.value=u}},[e("div",W,[e("div",Q,[e("h1",X,S(v(a).title),1),e("p",null,S(v(a).asignatura),1),Y,Z,e("p",tt,S(v(a).aprendizaje),1),et,e("p",st,S(v(a).contenidocentral),1)]),e("button",{class:"important",onClick:r},"Comenzar")]),e("div",{class:"lottie","data-animation-path":"odas/animations/intro_"+v(a).materia+".json","data-anim-loop":"true","data-name":"intro_"+v(a).materia},null,8,nt)],512)):g("",!0)]),_:1}))}};const ot={key:0,class:"material-icons-two-tone"},rt={key:1,class:"material-icons-two-tone"},ct={class:"container"},lt={class:"area"},it=e("hr",null,null,-1),dt=e("div",{class:"area row vertical extrainfo"},[e("button",null,"Aprendizajes esperados"),e("button",null,"Contenido central")],-1),ut=e("hr",null,null,-1),vt={class:"area pantallas"},_t=["onClick"],pt={class:"label"},ht=e("hr",null,null,-1),gt=e("div",{class:"area"},[e("h2",null,[e("span",{class:"material-icons-two-tone"},"donut_large"),e("span",{class:"label"},"\xA0Progreso")]),e("div",{class:"progreso"},[e("div",{class:"bar",style:"width:"+70+"%"})]),e("hr")],-1),yt=e("div",{class:"area"},[e("h2",null,[e("span",{class:"material-icons-two-tone"},"auto_awesome"),e("span",{class:"label"},"\xA0Puntaje")]),e("div",{class:"puntaje"},[B("10 "),e("span",{class:"label"},"/100")])],-1),mt=e("hr",null,null,-1),ft={setup(n){const l=$("activityFile"),a=$("statusFile"),o=x(!0),t=d=>{a.value.step=0,a.value.screen=d},r=()=>{console.log(l.id),O(l.id+"_").removeStorageSync("status"),location.reload()};return(d,_)=>(s(),f(D,{name:"zoom"},{default:C(()=>[e("aside",{class:w(["ActivitySidebar",[o.value?"":"mini"]])},[e("div",{class:"openclosebtn",onClick:_[0]||(_[0]=y=>o.value=!o.value)},[o.value?(s(),c("span",ot,"navigate_before")):(s(),c("span",rt,"navigate_next"))]),e("div",ct,[e("div",lt,[e("h1",null,S(v(l).title),1)]),it,dt,ut,e("div",vt,[e("ul",null,[(s(!0),c(b,null,L(v(l).screens,(y,u)=>(s(),c("li",{class:w(["screenItem",u==v(a).screen?"active":""]),onClick:m=>t(u)},[e("span",{class:w(["material-icons-two-tone",u==v(a).screen?"active":""])},S(y.icon),3),e("span",pt,"\xA0"+S(y.title),1)],10,_t))),256))])]),ht,gt,yt,mt,e("div",{class:"area row"},[e("button",{onClick:r},"Reiniciar")])])],2)]),_:1}))}};const bt=["innerHTML"],kt=["innerHTML"],T={props:{data:Object},setup(n){const l=n,a=M(()=>({"--fontSize":l.data.size||"1rem"})),o=t=>window.MathJax.tex2svg(t).getElementsByTagName("svg")[0].outerHTML;return(t,r)=>n.data.block?(s(),c("div",{key:0,class:"blockmathCont",style:A(v(a)),innerHTML:o(n.data.math)},null,12,bt)):(s(),c("span",{key:1,class:"blockmathCont",style:A(v(a)),innerHTML:o(n.data.math)},null,12,kt))}};var $t=(n,l)=>{const a=n.__vccOpts||n;for(const[o,t]of l)a[o]=t;return a};const St=n=>(E("data-v-4c4763ff"),n=n(),V(),n),xt=["id"],Lt={key:0,class:"drops dropsLeft"},wt=["data"],Tt=["innerHTML"],Nt={class:"drags"},Ct=["data"],Dt=St(()=>e("div",{class:"material-icons-two-tone"},"pan_tool",-1)),At=["innerHTML"],Mt={key:1,class:"drops dropsRight"},Ft=["data"],Ot=["innerHTML"],Ht={props:{blockid:String,data:Object},setup(n){const l=n,a=x();var o="#block-"+l.blockid,t=null;const r=()=>{t=document.querySelectorAll(o+" .drop"),Draggable.create(o+" .drag",{type:"x,y",bounds:o,zIndexBoost:!1,onDrag:function(h){d(h,this)},onClick:function(h){_(h,this)},onDragEnd:function(h){y(h,this)}})},d=(h,p)=>{for(var i=0;i<t.length;i++){if(p.hitTest(t[i],"40%"))return p.target.classList.add("hover"),t[i].classList.add("hover"),!1;p.target.classList.remove("hover"),t[i].classList.remove("hover")}},_=(h,p)=>{var i=document.querySelector(o+" .drags");p.target.parentElement!=i&&(i.append(p.target),TweenLite.to(p.target,.2,{x:0,y:0}))},y=(h,p)=>{for(var i=!1,k=0;k<t.length;k++)p.hitTest(t[k],"40%")&&(i=!0,t[k].append(p.target),TweenLite.to(p.target,.2,{x:0,y:0}),p.target.classList.remove("hover"),t[k].classList.remove("hover"));i||TweenLite.to(p.target,.2,{x:0,y:0})},u=setInterval(function(){Draggable&&(r(),m())},500),m=()=>{clearInterval(u)};return(h,p)=>(s(),c("div",{class:"blockDragDrop",id:"block-"+n.blockid,ref:(i,k)=>{k.block=i,a.value=i}},[n.data.dropsLeft?(s(),c("section",Lt,[(s(!0),c(b,null,L(n.data.dropsLeft,(i,k)=>(s(),c("div",{class:"drop",data:i[1]},[typeof i[0]=="string"?(s(),c("div",{key:0,class:"content",innerHTML:i[0]},null,8,Tt)):i[0].math?(s(),f(T,{key:1,data:i[0]},null,8,["data"])):g("",!0)],8,wt))),256))])):g("",!0),e("section",Nt,[(s(!0),c(b,null,L(n.data.drags,(i,k)=>(s(),c("div",{class:"drag",data:i[1]},[Dt,typeof i[0]=="string"?(s(),c("div",{key:0,class:"content",innerHTML:i[0]},null,8,At)):i[0].math?(s(),f(T,{key:1,data:i[0]},null,8,["data"])):g("",!0)],8,Ct))),256))]),n.data.dropsRight?(s(),c("section",Mt,[(s(!0),c(b,null,L(n.data.dropsRight,(i,k)=>(s(),c("div",{class:"drop",data:i[1]},[typeof i[0]=="string"?(s(),c("div",{key:0,class:"content",innerHTML:i[0]},null,8,Ot)):i[0].math?(s(),f(T,{key:1,data:i[0]},null,8,["data"])):g("",!0)],8,Ft))),256))])):g("",!0)],8,xt))}};var jt=$t(Ht,[["__scopeId","data-v-4c4763ff"]]);const zt=["id"],It=["onClick"],Bt=e("div",{class:"material-icons-two-tone"},"touch_app",-1),Et={class:"option-letter"},Vt=["innerHTML"],qt={props:{blockid:String,data:Object},setup(n){const l=n,a=x(),o=x([]);var t=x(!0);const r=u=>"abcdefghijk"[u],d=()=>{for(var u in l.data.options)l.data.options,o.value[u]=!1;_()},_=()=>{var u=0;l.data.options.forEach(m=>{m[1]&&(u+=1)}),u>1&&(t.value=!1)};d();const y=u=>{if(t.value){for(var m in o.value)o.value[m]=!1;o.value[u]=!0}else o.value[u]=!o.value[u]};return(u,m)=>(s(),c("div",{class:"blockSelect",id:"block-"+n.blockid,ref:(h,p)=>{p.block=h,a.value=h}},[(s(!0),c(b,null,L(n.data.options,(h,p)=>(s(),c("div",{class:w(["blockSelectOption",o.value[p]?"active":""]),onClick:i=>y(p)},[Bt,e("div",Et,S(r(p)),1),typeof h[0]=="string"?(s(),c("div",{key:0,class:"content",innerHTML:h[0]},null,8,Vt)):h[0].math?(s(),f(T,{key:1,data:h[0]},null,8,["data"])):g("",!0)],10,It))),256))],8,zt))}};const Pt={class:"blockContainer"},Gt=["innerHTML"],Rt=["innerHTML"],Jt={key:0,class:"text-center my-1"},Ut={key:1,class:"text-center my-2"},Kt={props:{block:Object,blockid:String},setup(n){const l=n,a=M(()=>({"--block-width":l.block.width||"100%"}));return(o,t)=>(s(),c("div",{class:"block",style:A(v(a))},[e("div",Pt,[(s(!0),c(b,null,L(n.block.content,(r,d)=>(s(),c(b,null,[typeof r=="string"?(s(),c("span",{key:0,innerHTML:r},null,8,Gt)):r.text?(s(),c("div",{key:1,innerHTML:r.text,class:w(r.class||"my-2")},null,10,Rt)):r.math?(s(),f(T,{key:2,data:r,ref:(_,y)=>{y.question=_}},null,8,["data"])):g("",!0),r.dragdrop?(s(),f(jt,{key:3,data:r,blockid:n.blockid+"-"+d},null,8,["data","blockid"])):g("",!0),r.select?(s(),f(qt,{key:4,data:r,blockid:n.blockid+"-"+d},null,8,["data","blockid"])):g("",!0)],64))),256))]),n.block.buttonNextStep?(s(),c("div",Jt,[e("button",{onClick:t[0]||(t[0]=r=>o.$emit("stepNext"))},S(n.block.buttonNextStep),1)])):g("",!0),n.block.buttonNextScreen?(s(),c("div",Ut,[e("button",{class:"important",onClick:t[1]||(t[1]=r=>o.$emit("screenNext",1))},S(n.block.buttonNextScreen),1)])):g("",!0)],4))}};const Wt={class:"stepsNavigation"},Qt=["disabled"],Xt=e("span",{class:"material-icons-two-tone"},"navigate_before",-1),Yt=[Xt],Zt=["disabled"],te=e("span",{class:"material-icons-two-tone"},"navigate_next",-1),ee=[te],se={props:{steps:{type:Number,required:!0}},setup(n){const l=n,a=$("statusFile");x(0);const o=t=>{(t==-1&&a.value.step>0||t==1&&a.value.step<l.steps-1)&&(a.value.step+=t)};return(t,r)=>(s(),c("div",Wt,[e("button",{onClick:r[0]||(r[0]=d=>o(-1)),disabled:v(a).step==0},Yt,8,Qt),(s(!0),c(b,null,L(n.steps,(d,_)=>(s(),c("div",{class:w(["step",[v(a).step==_?"active":"non-active"]])},null,2))),256)),e("button",{onClick:r[1]||(r[1]=d=>o(1)),disabled:v(a).step==n.steps-1},ee,8,Zt)]))}};const ne={props:{screenindex:{type:Number},screen:{type:Object,required:!0}},setup(n){const l=n,a=$("statusFile"),o=M(()=>({})),t=()=>{a.value.step++},r=d=>l.screen.steps?a.value.step==d:!0;return(d,_)=>(s(),c("div",{class:"activityScreen",style:A(v(o))},[(s(!0),c(b,null,L(n.screen.blocks,(y,u)=>(s(),f(D,{name:"slide"},{default:C(()=>[H(F(Kt,{block:y,onStepNext:t,onScreenNext:_[0]||(_[0]=m=>d.$emit("screenNext",m)),blockid:n.screenindex+"-"+u},null,8,["block","blockid"]),[[j,r(u)]])]),_:2},1024))),256)),n.screen.steps?(s(),f(se,{key:0,steps:n.screen.blocks.length},null,8,["steps"])):g("",!0)],4))}};const ae={class:"Activity"},oe={setup(n){const l=$("activityFile"),a=$("statusFile"),o=t=>{a.value.step=0,a.value.screen+=t};return(t,r)=>(s(),f(D,{name:"zoom"},{default:C(()=>[e("section",ae,[(s(!0),c(b,null,L(v(l).screens,(d,_)=>H((s(),f(ne,{screen:d,onScreenNext:o,screenindex:_},null,8,["screen","screenindex"])),[[j,_==v(a).screen]])),256))])]),_:1}))}},re={key:2},ce={setup(n){const l=$("activityFile"),a=$("statusFile"),o=t=>{a.value.state=t};return(t,r)=>v(l)&&v(a)?(s(),c(b,{key:0},[v(a).state=="@intro"?(s(),f(at,{key:0,onStart:r[0]||(r[0]=d=>o("@activity"))})):v(a).state=="@activity"?(s(),c(b,{key:1},[F(ft),F(oe)],64)):v(a).state=="@ended"?(s(),c("p",re,"Ended")):g("",!0)],64)):g("",!0)}};function le(n){var l=q.generate(n||"-");const a=l.toDataUrl();var o=document.createElement("style");o.type="text/css",o.innerHTML="#app {background-image: "+a+";}",document.getElementsByTagName("head")[0].appendChild(o)}var ie={buildBG:le};const de=U();var N=P(ce);N.config.globalProperties.emitter=de;N.use(G);gsap.registerPlugin(Draggable);ue();async function ue(){const n=window.location.search,a=new URLSearchParams(n).get("oda");if(a)try{const o=O(a+"_"),t=await R.get("./odas/"+a+"/oda.json");N.provide("activityFile",t.data),ie.buildBG(t.data.id);const d=x({state:"@intro",screen:0,step:0});N.provide("statusFile",d),N.mount("#app");const _=o.getStorageSync("status");_&&(d.value=JSON.parse(z.atob(_)),console.log("Saved data loaded")),J(()=>d,(y,u)=>{const m=z.btoa(JSON.stringify(y.value));o.setStorageSync("status",m)},{deep:!0})}catch(o){alert("Ocurri\xF3 un error al cargar la ODA"),console.log(o)}else alert("ODA no definida")}
