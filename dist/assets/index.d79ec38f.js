import{o as a,c as m,w as A,T as D,a as c,b as r,d as p,r as x,t as w,e as k,F as y,n as T,f as H,i as L,g as V,h as M,p as j,j as q,k as S,l as B,v as C,m as F,q as z,G as E,s as P,u as G}from"./vendor.6037e26f.js";const R=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function e(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};R();const U={key:0,class:"dialog intro"};function W(s,t,n,e,o,l){return a(),m(D,{name:"zoom",onAfterLeave:e.start},{default:A(()=>[e.dialog?(a(),c("div",U,[r("button",{class:"important",onClick:t[0]||(t[0]=(...d)=>e.close&&e.close(...d))},"Comenzar")])):p("",!0)]),_:1},8,["onAfterLeave"])}var h=(s,t)=>{const n=s.__vccOpts||s;for(const[e,o]of t)n[e]=o;return n};const J={setup(s,t){const n=x(!0);return{dialog:n,close:()=>{n.value=!1},start:()=>{t.emit("start")}}}};var K=h(J,[["render",W]]);const Q={key:0,class:"material-icons-two-tone"},X={key:1,class:"material-icons-two-tone"},Y={class:"container"},Z={class:"area"},ee=r("hr",null,null,-1),te={class:"area pantallas"},ne=["onClick"],se={class:"label"},oe=r("hr",null,null,-1),ae=r("div",{class:"area"},[r("h2",null,[r("span",{class:"material-icons-two-tone"},"donut_large"),r("span",{class:"label"},"\xA0Progreso")]),r("div",{class:"progreso"},[r("div",{class:"bar",style:"width:"+70+"%"})])],-1),re=r("hr",null,null,-1),ce=r("div",{class:"area"},[r("h2",null,[r("span",{class:"material-icons-two-tone"},"auto_awesome"),r("span",{class:"label"},"\xA0Puntaje")]),r("div",{class:"puntaje"},[H("10 "),r("span",{class:"label"},"/100")])],-1);function ie(s,t,n,e,o,l){return a(),m(D,{name:"zoom"},{default:A(()=>[r("aside",{class:T(["ActivitySidebar",[e.wide?"":"mini"]])},[r("div",{class:"openclosebtn",onClick:t[0]||(t[0]=d=>e.wide=!e.wide)},[e.wide?(a(),c("span",Q,"navigate_before")):(a(),c("span",X,"navigate_next"))]),r("div",Y,[r("div",Z,[r("h1",null,w(e.Activity.title),1)]),ee,r("div",te,[r("ul",null,[(a(!0),c(y,null,k(e.Activity.screens,(d,_)=>(a(),c("li",{class:T(["screenItem",_==e.Status.screen?"active":""]),onClick:u=>e.goToScreen(_)},[r("span",{class:T(["material-icons-two-tone",_==e.Status.screen?"active":""])},w(d.icon),3),r("span",se,"\xA0"+w(d.title),1)],10,ne))),256))])]),oe,ae,re,ce])],2)]),_:1})}const le={setup(s,t){const n=L("activityFile"),e=L("statusFile");return{wide:x(!0),Activity:n,Status:e,goToScreen:d=>{e.value.screen=d}}}};var de=h(le,[["render",ie]]);const ue=["innerHTML"],_e=["innerHTML"];function ve(s,t,n,e,o,l){return n.data.block?(a(),c("div",{key:0,class:"blockmathCont",style:V(e.cssVars),innerHTML:e.mjax(n.data.math)},null,12,ue)):(a(),c("span",{key:1,class:"blockmathCont",style:V(e.cssVars),innerHTML:e.mjax(n.data.math)},null,12,_e))}const pe={components:{},props:["data"],setup(s,t){return{cssVars:M(()=>({"--fontSize":s.data.size||"1rem"})),mjax:o=>{const l=window.MathJax.tex2svg(o);return console.log(l),l.getElementsByTagName("svg")[0].outerHTML}}}};var N=h(pe,[["render",ve]]);const me=s=>(j("data-v-5536dbb8"),s=s(),q(),s),ye=["id"],ge={key:0,class:"drops dropsLeft"},fe=["data"],be=["innerHTML"],he={class:"drags"},ke=["data"],Se=me(()=>r("div",{class:"material-icons-two-tone"},"pan_tool",-1)),xe=["innerHTML"],we={key:1,class:"drops dropsRight"},Le=["data"],$e=["innerHTML"],Ae={props:{blockid:String,data:Object},setup(s){const t=s,n=x();var e="#block-"+t.blockid,o=null;const l=()=>{o=document.querySelectorAll(e+" .drop"),Draggable.create(e+" .drag",{type:"x,y",bounds:e,onDrag:function(b){d(b,this)},onClick:function(b){_(b,this)},onDragEnd:function(b){u(b,this)}})},d=(b,v)=>{for(var i=0;i<o.length;i++){if(v.hitTest(o[i],"40%"))return v.target.classList.add("hover"),o[i].classList.add("hover"),!1;v.target.classList.remove("hover"),o[i].classList.remove("hover")}},_=(b,v)=>{var i=document.querySelector(e+" .drags");v.target.parentElement!=i&&(i.append(v.target),TweenLite.to(v.target,.2,{x:0,y:0}))},u=(b,v)=>{for(var i=!1,g=0;g<o.length;g++)v.hitTest(o[g],"40%")&&(i=!0,o[g].append(v.target),TweenLite.to(v.target,.2,{x:0,y:0}),v.target.classList.remove("hover"),o[g].classList.remove("hover"));i||TweenLite.to(v.target,.2,{x:0,y:0})},f=setInterval(function(){Draggable?(l(),$()):console.warn("Loading draggable")},500),$=()=>{console.warn("cleaning"),clearInterval(f)};return(b,v)=>(a(),c("div",{class:"blockDragDrop",id:"block-"+s.blockid,ref:(i,g)=>{g.block=i,n.value=i}},[s.data.dropsLeft?(a(),c("section",ge,[(a(!0),c(y,null,k(s.data.dropsLeft,(i,g)=>(a(),c("div",{class:"drop",data:i[1]},[typeof i[0]=="string"?(a(),c("div",{key:0,class:"content",innerHTML:i[0]},null,8,be)):i[0].math?(a(),m(N,{key:1,data:i[0]},null,8,["data"])):p("",!0)],8,fe))),256))])):p("",!0),r("section",he,[(a(!0),c(y,null,k(s.data.drags,(i,g)=>(a(),c("div",{class:"drag",data:i[1]},[Se,typeof i[0]=="string"?(a(),c("div",{key:0,class:"content",innerHTML:i[0]},null,8,xe)):i[0].math?(a(),m(N,{key:1,data:i[0]},null,8,["data"])):p("",!0)],8,ke))),256))]),s.data.dropsRight?(a(),c("section",we,[(a(!0),c(y,null,k(s.data.dropsRight,(i,g)=>(a(),c("div",{class:"drop",data:i[1]},[typeof i[0]=="string"?(a(),c("div",{key:0,class:"content",innerHTML:i[0]},null,8,$e)):i[0].math?(a(),m(N,{key:1,data:i[0]},null,8,["data"])):p("",!0)],8,Le))),256))])):p("",!0)],8,ye))}};var De=h(Ae,[["__scopeId","data-v-5536dbb8"]]);const Te={class:"blockContainer"},Ve=["innerHTML"],Ne={key:0,class:"text-center my-1"},Me={key:1,class:"text-center my-2"};function Fe(s,t,n,e,o,l){const d=S("BlockMath"),_=S("BlockDragDrop");return a(),c("div",{class:"block",style:V(e.cssVars)},[r("div",Te,[(a(!0),c(y,null,k(n.block.content,(u,f)=>(a(),c(y,null,[typeof u=="string"?(a(),c("span",{key:0,innerHTML:u},null,8,Ve)):u.math?(a(),m(d,{key:1,data:u},null,8,["data"])):p("",!0),u.dragdrop?(a(),m(_,{key:2,data:u,blockid:n.blockid+"-"+f},null,8,["data","blockid"])):p("",!0)],64))),256))]),n.block.buttonNextStep?(a(),c("div",Ne,[r("button",{onClick:t[0]||(t[0]=u=>s.$emit("stepNext"))},w(n.block.buttonNextStep),1)])):p("",!0),n.block.buttonNextScreen?(a(),c("div",Me,[r("button",{class:"important",onClick:t[1]||(t[1]=u=>s.$emit("screenNext",1))},w(n.block.buttonNextScreen),1)])):p("",!0)],4)}const Be={components:{BlockMath:N,BlockDragDrop:De},props:["block","blockid"],setup(s,t){return{cssVars:M(()=>({"--block-width":s.block.width||"100%"}))}}};var I=h(Be,[["render",Fe]]);const Ce={class:"stepsNavigation"},Ie=["disabled"],Oe=r("span",{class:"material-icons-two-tone"},"navigate_before",-1),He=[Oe],je=["disabled"],qe=r("span",{class:"material-icons-two-tone"},"navigate_next",-1),ze=[qe];function Ee(s,t,n,e,o,l){return a(),c("div",Ce,[r("button",{onClick:t[0]||(t[0]=d=>e.navigate(-1)),disabled:n.modelValue==0},He,8,Ie),(a(!0),c(y,null,k(n.steps,(d,_)=>(a(),c("div",{class:T(["step",[n.modelValue==_?"active":"non-active"]])},null,2))),256)),r("button",{onClick:t[1]||(t[1]=d=>e.navigate(1)),disabled:n.modelValue==n.steps-1},ze,8,je)])}const Pe={components:{},props:{modelValue:{type:Number,default:0,required:!0},steps:{type:Number,required:!0}},setup(s,t){const n=x(0);return{navigate:o=>{if(o==-1&&s.modelValue>0||o==1&&s.modelValue<s.steps-1){const l=s.modelValue+o;t.emit("update:modelValue",l)}},currentStep:n}}};var Ge=h(Pe,[["render",Ee]]);function Re(s,t,n,e,o,l){const d=S("ScreenBlocks"),_=S("ActivityScreenSteps");return a(),c("div",{class:"activityScreen",style:V(e.cssVars)},[(a(!0),c(y,null,k(n.screen.blocks,(u,f)=>(a(),m(D,{name:"slide"},{default:A(()=>[B(F(d,{block:u,onStepNext:t[0]||(t[0]=$=>e.step++),onScreenNext:t[1]||(t[1]=$=>s.$emit("screenNext",$)),blockid:n.screenindex+"-"+f},null,8,["block","blockid"]),[[C,e.useSteps(f)]])]),_:2},1024))),256)),n.screen.steps?(a(),m(_,{key:0,modelValue:e.step,"onUpdate:modelValue":t[2]||(t[2]=u=>e.step=u),steps:n.screen.blocks.length},null,8,["modelValue","steps"])):p("",!0)],4)}const Ue={components:{ScreenBlocks:I},props:{screenindex:{type:Number},screen:{type:Object,required:!0}},setup(s){const t=x(0);return{cssVars:M(()=>({})),useSteps:o=>s.screen.steps?t.value==o:!0,step:t}},components:{ScreenBlocks:I,ActivityScreenSteps:Ge}};var We=h(Ue,[["render",Re]]);const Je={class:"Activity"};function Ke(s,t,n,e,o,l){const d=S("ActivityScreen");return a(),m(D,{name:"zoom"},{default:A(()=>[r("section",Je,[(a(!0),c(y,null,k(e.Activity.screens,(_,u)=>B((a(),m(d,{screen:_,onScreenNext:e.changeScreen,screenindex:u},null,8,["screen","onScreenNext","screenindex"])),[[C,u==e.Status.screen]])),256))])]),_:1})}const Qe={components:{ActivityScreen:We},props:{screenModel:{type:Number,default:0,required:!0}},setup(s,t){const n=L("activityFile"),e=L("statusFile");return{Activity:n,Status:e,changeScreen:l=>{e.value.screen+=l}}}};var Xe=h(Qe,[["render",Ke]]);const Ye={key:2};function Ze(s,t,n,e,o,l){const d=S("Intro"),_=S("ActivitySidebar"),u=S("ActivityWindow");return e.activityFile?(a(),c(y,{key:0},[e.statusFile.state=="@intro"?(a(),m(d,{key:0,onStart:t[0]||(t[0]=f=>e.changestate("@activity"))})):e.statusFile.state=="@activity"?(a(),c(y,{key:1},[F(_),F(u,{screenModel:e.statusFile.screen,"onUpdate:screenModel":t[1]||(t[1]=f=>e.statusFile.screen=f)},null,8,["screenModel"])],64)):e.statusFile.state=="@ended"?(a(),c("p",Ye,"Ended")):p("",!0)],64)):p("",!0)}const et={components:{Intro:K,ActivitySidebar:de,ActivityWindow:Xe},setup(){const s=x({state:"@intro",screen:0});z("statusFile",x(s));const t=e=>{s.value.state=e},n=L("activityFile");return{changestate:t,activityFile:n,statusFile:s}}};var tt=h(et,[["render",Ze]]);function nt(s){var t=E.generate(s||"-");const n=t.toDataUrl();document.getElementById("app").style.backgroundImage=n}var st={buildBG:nt};var O=P(tt);gsap.registerPlugin(Draggable);ot();async function ot(){const s=window.location.search,n=new URLSearchParams(s).get("oda");if(n)try{const e=await G.get("./odas/"+n+"/oda.json");O.provide("activityFile",e.data),st.buildBG(e.data.id),O.mount("#app")}catch(e){alert("Ocurri\xF3 un error al cargar la ODA"),console.log(e)}else alert("ODA no definida")}
