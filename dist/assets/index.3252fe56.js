import{i as y,r as O,l as _e,o as e,c as C,w as M,T as J,a as r,b as n,t as S,u as i,F as f,d as g,e as se,n as P,f as A,g as z,h as H,j as G,k as U,p as ae,m as ne,q as oe,s as F,v as K,_ as Q,x as le,y as X,z as Y,G as ve,A as pe,V as fe,B as ge,C as he,D as Z,E as ke}from"./vendor.2e784223.js";const ye=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}};ye();const be={class:"container text-center"},me={class:"description my-2"},$e={class:"my-2"},Se=n("hr",null,null,-1),we=n("h4",{class:"my-1"},"Aprendizajes esperados",-1),xe={class:"mb-2"},Le=n("h4",{class:"my-1"},"Contenido central",-1),Ce={class:"mb-2"},Te=["data-animation-path","data-name"],Ae={emits:["start"],setup(s,{emit:l}){const t=y("activityFile");y("statusFile");const a=O(),o=O(!0),c=()=>{o.value=!1},u=()=>{l("start")};return _e.searchAnimations(),(_,p)=>(e(),C(J,{name:"zoom",onAfterLeave:u},{default:M(()=>[o.value?(e(),r("div",{key:0,class:"dialog intro",ref_key:"introContainer",ref:a},[n("div",be,[n("div",me,[n("h1",$e,S(i(t).title),1),n("p",null,S(i(t).asignatura),1),Se,we,n("p",xe,S(i(t).aprendizajes),1),i(t).contenidocentral?(e(),r(f,{key:0},[Le,n("p",Ce,S(i(t).contenidocentral),1)],64)):g("",!0)]),n("button",{class:"important",onClick:c},"Comenzar")]),n("div",{class:"lottie","data-animation-path":"odas/animations/intro_"+i(t).materia+".json","data-anim-loop":"true","data-name":"intro_"+i(t).materia},null,8,Te)],512)):g("",!0)]),_:1}))}},ze={class:"material-icons-two-tone"},j={props:{},setup(s){return(l,t)=>(e(),r("div",ze,[se(l.$slots,"default")]))}};var B=(s,l)=>{const t=s.__vccOpts||s;for(const[a,o]of l)t[a]=o;return t};const Me=["innerHTML"],De={key:0,class:"dialog"},Oe=z("close"),Ie={class:"ma-1"},Ne={props:{label:String,classinit:Object},setup(s){const l=O(!1),t=()=>{l.value=!0},a=()=>{l.value=!1};return(o,c)=>(e(),r(f,null,[n("button",{onClick:t,innerHTML:s.label,class:P(s.classinit)},null,10,Me),A(J,{name:"zoom"},{default:M(()=>[l.value?(e(),r("div",De,[n("button",{class:"close",onClick:a},[A(j,null,{default:M(()=>[Oe]),_:1})]),n("div",Ie,[se(o.$slots,"default",{},void 0,!0)])])):g("",!0)]),_:3})],64))}};var re=B(Ne,[["__scopeId","data-v-16797cfb"]]);const Fe=n("hr",null,null,-1),Pe={class:"area row"},je=z("Mostrar pantallas"),Be=z("Cerrar pantallas"),Ee={props:{},setup(s){const l=H(),t=()=>{l.appContext.config.globalProperties.emitter.emit("solve")},a=y("test"),o=y("view"),c=()=>{o.value=!o.value,console.log(o.value)};return(u,_)=>i(a)?(e(),r(f,{key:0},[Fe,n("div",{class:"area row mb-1"},[n("button",{class:"test",onClick:t},"Resolver todo")]),n("div",Pe,[n("button",{class:"test",onClick:c},[i(o)?(e(),r(f,{key:1},[Be],64)):(e(),r(f,{key:0},[je],64))])])],64)):g("",!0)}};const He=s=>(ae("data-v-5e37cb7c"),s=s(),ne(),s),Re={class:"area"},qe=z("donut_large"),Ve={class:"label"},Je={class:"progreso"},Ge=He(()=>n("hr",null,null,-1)),Ue={props:{},setup(s){const l=y("statusFile"),t=G(()=>{var a=l.value.answers,o={total:0,unanswered:0};return a&&(o.total=Object.keys(a).length,Object.keys(a).forEach(function(c){a[c],a[c]==null&&o.unanswered++})),o});return(a,o)=>(e(),r("div",Re,[n("h2",null,[A(j,null,{default:M(()=>[qe]),_:1}),n("span",Ve,"\xA0Progreso "+S(i(t).total-i(t).unanswered)+" /"+S(i(t).total),1)]),n("div",Je,[n("div",{class:"bar",style:U("width:"+Math.round((i(t).total-i(t).unanswered)/i(t).total*100)+"%")},null,4)]),Ge]))}};var We=B(Ue,[["__scopeId","data-v-5e37cb7c"]]);const Ke={key:0,class:"area"},Qe=z("auto_awesome"),Xe={class:"label"},Ye={props:{},setup(s){const l=y("statusFile"),t=y("resultsFile"),a=()=>{const o=t.value.oksPercentage;var c="ok1";switch(!0){case(o<=100&&o>75):c="ok4";break;case(o<=75&&o>50):c="ok3";break;case(o<=50&&o>25):c="ok2";break}return c};return(o,c)=>i(l).finalize?(e(),r("div",Ke,[n("h2",{class:P(["puntaje",a()])},[A(j,null,{default:M(()=>[Qe]),_:1}),n("span",Xe,"\xA0Puntaje: "+S(i(t).oksPercentage)+"%",1)],2)])):g("",!0)}};var Ze=B(Ye,[["__scopeId","data-v-f0824b86"]]);const et=z("navigate_before"),tt=z("navigate_next"),st={class:"area"},at=n("hr",null,null,-1),nt={class:"area row vertical extrainfo"},ot={class:"text-center"},lt=n("h1",{class:"main mb-1"},"Aprendizajes esperados",-1),rt={class:"main"},ct={class:"text-center"},it=n("h1",{class:"main mb-1"},"Contenido central",-1),ut={class:"main"},dt=n("hr",null,null,-1),_t={class:"area pantallas"},vt=["onClick"],pt={class:"label"},ft=n("hr",null,null,-1),gt=n("hr",null,null,-1),ht={setup(s){const l=y("blocked"),t=y("activityFile"),a=y("statusFile"),o=O(!0),c=H(),u=p=>{a.value.step=0,a.value.screen=p},_=()=>{K(t.id+"_").removeStorageSync("status"),location.reload()};return c.appContext.config.globalProperties.emitter.on("sidebarmini",p=>{o.value=!1}),(p,w)=>{const x=oe("perfect-scrollbar");return e(),C(J,{name:"zoom"},{default:M(()=>[n("aside",{class:P(["ActivitySidebar",[o.value?"":"mini"]])},[n("div",{class:"openclosebtn",onClick:w[0]||(w[0]=m=>o.value=!o.value)},[o.value?(e(),C(j,{key:0},{default:M(()=>[et]),_:1})):(e(),C(j,{key:1},{default:M(()=>[tt]),_:1}))]),A(x,{class:"container"},{default:M(()=>[n("div",st,[n("h1",null,S(i(t).title),1)]),at,n("div",nt,[A(re,{label:"Aprendizajes esperados",classinit:["mb-1"]},{default:M(()=>[n("div",ot,[lt,n("div",rt,S(i(t).aprendizajes),1)])]),_:1}),i(t).contenidocentral?(e(),C(re,{key:0,label:"Contenido central"},{default:M(()=>[n("div",ct,[it,n("div",ut,S(i(t).contenidocentral),1)])]),_:1})):g("",!0)]),dt,n("div",_t,[n("ul",null,[(e(!0),r(f,null,F(i(t).screens,(m,b)=>(e(),r("li",{class:P(["screenItem",b==i(a).screen?"active":""]),onClick:T=>u(b)},[A(j,{class:P(b==i(a).screen?"active":"")},{default:M(()=>[z(S(m.icon),1)]),_:2},1032,["class"]),n("span",pt,"\xA0"+S(m.title),1)],10,vt))),256))])]),ft,A(We),A(Ze),A(Ee),i(l)?g("",!0):(e(),r(f,{key:0},[gt,n("div",{class:"area row"},[n("button",{onClick:_},"Reiniciar")])],64))]),_:1})],2)]),_:1})}}};const kt=["innerHTML"],yt=["innerHTML"],R={props:{data:Object},setup(s){const l=s,t=G(()=>({"--fontSize":l.data.size||"1rem"})),a=o=>window.MathJax.tex2svg(o).getElementsByTagName("svg")[0].outerHTML;return(o,c)=>s.data.block?(e(),r("div",{key:0,class:"blockmathCont",style:U(i(t)),innerHTML:a(s.data.math)},null,12,kt)):(e(),r("span",{key:1,class:"blockmathCont",style:U(i(t)),innerHTML:a(s.data.math)},null,12,yt))}};const ce={props:{},setup(s,{emit:l}){const t=y("test"),a=()=>{l("solve")};return(o,c)=>i(t)?(e(),r("button",{key:0,class:"solveModule test",onClick:a},"Resolver")):g("",!0)}};const bt=["id"],mt={key:0,class:"drops dropsLeft"},$t=["data"],St=["innerHTML"],wt={class:"drags"},xt=["data","data-index"],Lt=z("pan_tool"),Ct=["innerHTML"],Tt={key:1,class:"drops dropsRight"},At=["data"],zt=["innerHTML"],Mt={props:{blockid:String,data:Object},setup(s){const l=s,t=y("statusFile"),a=y("blocked"),o=H(),c=O(),u=O();var _="#block-"+l.blockid,p=_+" .drag",w=_+" .drop",x=null,m;const b=()=>{if(x=document.querySelectorAll(_+" .drop"),a)return!1;m=Draggable.create(p,{type:"x,y",bounds:_,zIndexBoost:!1,onDrag:function(h){T(h,this)},onClick:function(h){L(h,this)},onDragEnd:function(h){v(h,this)}})},T=(h,k)=>{for(var d=0;d<x.length;d++){if(k.hitTest(x[d],"40%"))return k.target.classList.add("hover"),x[d].classList.add("hover"),!1;k.target.classList.remove("hover"),x[d].classList.remove("hover")}},L=(h,k)=>{if(c.value!=null)return!1;var d=document.querySelector(_+" .drags");k.target.parentElement!=d&&(d.append(k.target),TweenLite.to(k.target,.2,{x:0,y:0}),I())},v=(h,k)=>{for(var d=!1,D=0;D<x.length;D++)k.hitTest(x[D],"40%")&&(d=!0,x[D].append(k.target),TweenLite.to(k.target,.2,{x:0,y:0}),k.target.classList.remove("hover"),x[D].classList.remove("hover"),I());d||TweenLite.to(k.target,.2,{x:0,y:0})},$=h=>{var k=btoa(h);return k},I=()=>{for(var h=document.querySelectorAll(p),k=[],d=0;d<h.length;d++){var D=h[d].getAttribute("data-index"),V=h[d].parentElement.getAttribute("data");k.push([D,V])}t.value.answers[l.blockid]=k},E=setInterval(function(){Draggable&&(b(),W())},500),W=()=>{clearInterval(E),de()},de=()=>{if(t.value.answers||(t.value.answers={}),t.value.answers[l.blockid]){var h=t.value.answers[l.blockid];for(var k in h){var d=h[k];if(d[1]){var D=document.querySelector(p+'[data-index="'+d[0]+'"]'),V=document.querySelector(w+"[data="+d[1]+"]");V.append(D)}}}else t.value.answers[l.blockid]=null;t.value.finalize&&te()},ee=()=>{for(var h=document.querySelectorAll(p),k=0;k<h.length;k++){var d=atob(h[k].getAttribute("data")),D=document.querySelector(w+"[data="+d+"]");D.append(h[k])}I()},te=()=>{for(var h=document.querySelectorAll(p),k=0,d=0;d<h.length;d++){m[d].disable();var D=atob(h[d].getAttribute("data")),V=h[d].parentElement.getAttribute("data");D==V?h[d].classList.add("isok"):(h[d].classList.add("notok"),k++)}k==0?c.value=!0:c.value=!1,t.value.result[l.blockid]=c.value};return o.appContext.config.globalProperties.emitter.on("solve",h=>{ee()}),o.appContext.config.globalProperties.emitter.on("finalize",h=>{te()}),(h,k)=>(e(),r(f,null,[n("div",{class:"blockDragDrop",id:"block-"+s.blockid,ref_key:"block",ref:u},[s.data.dropsLeft?(e(),r("section",mt,[(e(!0),r(f,null,F(s.data.dropsLeft,(d,D)=>(e(),r("div",{class:"drop",data:d[1]},[typeof d[0]=="string"?(e(),r("div",{key:0,class:"content",innerHTML:d[0]},null,8,St)):d[0].math?(e(),C(R,{key:1,data:d[0]},null,8,["data"])):g("",!0)],8,$t))),256))])):g("",!0),n("section",wt,[(e(!0),r(f,null,F(s.data.drags,(d,D)=>(e(),r("div",{class:"drag",data:$(d[1]),"data-index":D},[A(j,null,{default:M(()=>[Lt]),_:1}),typeof d[0]=="string"?(e(),r("div",{key:0,class:"content",innerHTML:d[0]},null,8,Ct)):d[0].math?(e(),C(R,{key:1,data:d[0]},null,8,["data"])):g("",!0)],8,xt))),256))]),s.data.dropsRight?(e(),r("section",Tt,[(e(!0),r(f,null,F(s.data.dropsRight,(d,D)=>(e(),r("div",{class:"drop",data:d[1]},[typeof d[0]=="string"?(e(),r("div",{key:0,class:"content",innerHTML:d[0]},null,8,zt)):d[0].math?(e(),C(R,{key:1,data:d[0]},null,8,["data"])):g("",!0)],8,At))),256))])):g("",!0)],8,bt),A(ce,{onSolve:ee})],64))}};var Dt=B(Mt,[["__scopeId","data-v-3f31024a"]]);const Ot=["id"],It=["onClick"],Nt=z("touch_app"),Ft={class:"option-letter"},Pt=["innerHTML"],jt={props:{blockid:String,data:Object},setup(s){const l=s,t=O(),a=y("statusFile"),o=y("blocked"),c=H(),u=O(),_=O([]);var p=O(!0);const w=v=>"abcdefghijk"[v],x=()=>{for(var v in l.data.options)l.data.options,_.value[v]=!1;m(),a.value.answers||(a.value.answers={}),a.value.answers[l.blockid]?_.value=a.value.answers[l.blockid]:a.value.answers[l.blockid]=null},m=()=>{var v=0;l.data.options.forEach($=>{$[1]&&(v+=1)}),v>1&&(p.value=!1)};x();const b=v=>{if(o||a.value.finalize)return!1;if(p.value){for(var $ in _.value)_.value[$]=!1;_.value[v]=!0}else _.value[v]=!_.value[v];a.value.answers[l.blockid]=_.value},T=()=>{for(var v=l.data.options,$=0;$<v.length;$++)v[$][1]?_.value[$]=!0:_.value[$]=!1;a.value.answers[l.blockid]=_.value},L=()=>{for(var v=l.data.options,$=[],I=0;I<v.length;I++)$.push(v[I][1]);Q.isEqual($,_.value)?(t.value=!0,u.value.classList.add("isok")):(t.value=!1,u.value.classList.add("notok")),a.value.result[l.blockid]=t.value};return c.appContext.config.globalProperties.emitter.on("solve",v=>{T()}),c.appContext.config.globalProperties.emitter.on("finalize",v=>{L()}),(v,$)=>(e(),r(f,null,[n("div",{class:"blockSelect",id:"block-"+s.blockid,ref_key:"block",ref:u},[(e(!0),r(f,null,F(s.data.options,(I,E)=>(e(),r("div",{class:P(["blockSelectOption",_.value[E]?"active":""]),onClick:W=>b(E)},[A(j,null,{default:M(()=>[Nt]),_:1}),n("div",Ft,S(w(E)),1),typeof I[0]=="string"?(e(),r("div",{key:0,class:"content",innerHTML:I[0]},null,8,Pt)):I[0].math?(e(),C(R,{key:1,data:I[0]},null,8,["data"])):g("",!0)],10,It))),256))],8,Ot),A(ce,{onSolve:T})],64))}};const Bt=["src"],Et={props:{data:{type:Object}},setup(s){const l=y("activityFile");return(t,a)=>(e(),r("img",{class:"blockImg",src:"odas/"+i(l).id+"/"+s.data.img},null,8,Bt))}};var ie=B(Et,[["__scopeId","data-v-1def06aa"]]);const Ht=["title"],Rt=["innerHTML"],qt=z("contact_support"),Vt={key:2,class:"termDefinition"},Jt={key:0},Gt={key:0},Ut={props:{data:{type:Object}},setup(s){const l=O(!1),t=()=>{l.value=!l.value};return(a,o)=>(e(),r("div",{class:"blockTerm",title:s.data.d,onClick:t},[s.data.t?(e(),r("span",{key:0,innerHTML:s.data.t},null,8,Rt)):g("",!0),s.data.i?(e(),C(ie,{key:1,data:{img:s.data.i}},null,8,["data"])):g("",!0),A(j,null,{default:M(()=>[qt]),_:1}),l.value?(e(),r("div",Vt,[typeof s.data.d=="string"?(e(),r("p",Jt,S(s.data.d),1)):(e(!0),r(f,{key:1},F(s.data.d,(c,u)=>(e(),r(f,null,[typeof c=="string"?(e(),r("p",Gt,S(c),1)):c.math?(e(),C(R,{key:1,data:c},null,8,["data"])):g("",!0)],64))),256))])):g("",!0)],8,Ht))}};var Wt=B(Ut,[["__scopeId","data-v-fdef45ae"]]);const Kt={class:"blockContainer"},Qt=["innerHTML"],Xt={key:1},Yt=["innerHTML"],Zt={key:0,class:"text-center my-2"},es={props:{block:Object,blockid:String},setup(s){const l=s,t=y("view"),a=G(()=>({"--block-width":l.block.width||"100%"}));return(o,c)=>s.block.content.length?(e(),r("div",{key:0,class:"block",style:U(i(a))},[n("div",Kt,[(e(!0),r(f,null,F(s.block.content,(u,_)=>(e(),r(f,null,[typeof u=="string"?(e(),r("span",{key:0,innerHTML:u},null,8,Qt)):u.br?(e(),r("br",Xt)):u.text?(e(),r("div",{key:2,innerHTML:u.text,class:P(u.class||"my-2")},null,10,Yt)):u.term?(e(),C(Wt,{key:3,data:u},null,8,["data"])):u.img?(e(),C(ie,{key:4,data:u},null,8,["data"])):u.math?(e(),C(R,{key:5,data:u},null,8,["data"])):g("",!0),u.dragdrop?(e(),C(Dt,{key:6,data:u,blockid:s.blockid+"-"+_},null,8,["data","blockid"])):g("",!0),u.select?(e(),C(jt,{key:7,data:u,blockid:s.blockid+"-"+_},null,8,["data","blockid"])):g("",!0)],64))),256))]),i(t)?g("",!0):(e(),r("div",Zt,[s.block.buttonNextStep?(e(),r("button",{key:0,onClick:c[0]||(c[0]=u=>o.$emit("stepNext"))},S(s.block.buttonNextStep),1)):g("",!0),s.block.buttonNextScreen?(e(),r("button",{key:1,class:"important",onClick:c[1]||(c[1]=u=>o.$emit("screenNext",1))},S(s.block.buttonNextScreen),1)):g("",!0)]))],4)):g("",!0)}},ts={class:"block ScreenBlockEnd"},ss={class:"text-center"},as={class:"my-3"},ns=z("De un total de "),os=z(" tienes "),ls={class:"high"},rs=z("."),cs=["onClick"],is=n("div",{class:"my-3"},"\xBFDeseas finalizar?",-1),us=n("hr",null,null,-1),ds={key:1,class:"my-3"},_s=n("span",null,[z("Has contestado todas las preguntas. Verifica tus respuestas y da clic en "),n("strong",null,'"finalizar"'),z(".")],-1),vs=[_s],ps={key:2,class:"my-3"},fs=n("span",null,"Muy bien. Has llegado al final de la actividad.",-1),gs=[fs],hs=n("div",{class:"my-3"},[n("strong",null,"Actividad finalizada.")],-1),ks={class:"my-3"},ys=z("De un total de "),bs=z(" obtuviste un "),ms={class:"high"},$s=z("."),Ss=n("div",{class:"my-3"},"A continuaci\xF3n podr\xE1s ver un res\xFAmen de tus resultados:",-1),ws={class:"row wrap"},xs=["onClick"],Ls=n("div",{class:"my-3"},"Puedes ver tus resultados individuales o repasar los contenidos navegando con el men\xFA de la izquierda.",-1),Cs=n("div",{class:"my-3"},"Tambi\xE9n puedes reiniciar la actividad:",-1),Ts={props:{},setup(s){const l=y("activityFile"),t=y("statusFile"),a=y("resultsFile"),o=H(),c=y("blocked"),u=m=>{var b=m.split("-"),T=b[0],L=b[1],v=l.screens[T].title;return v+" > Bloque "+L},_=m=>{var b=m.split("-"),T=b[0],L=b[1];t.value.screen=T*1,t.value.step=L*1},p=G(()=>{var m=t.value.answers,b={tot:"",total:0,unanswered:{},unansweredLength:0};if(m){b.total=Object.keys(m).length;var T={};Object.keys(m).forEach(function(L){var v=m[L];m[L]==null&&(T[L]=v,b.unansweredLength++)}),Q(T).keys().sort().each(function(L){b.unanswered[L]=T[L]})}return b}),w=()=>{t.value.finalize=!0,o.appContext.config.globalProperties.emitter.emit("finalize");for(var m in t.value.result)a.value.total++,t.value.result[m]?a.value.oks++:a.value.errors++;a.value.total&&(a.value.oksPercentage=Math.round(a.value.oks*100/a.value.total),a.value.errorsPercentage=100-a.value.oksPercentage)};t.value.finalize&&setTimeout(function(){w()},1e3);const x=()=>{console.log(l.id),K(l.id+"_").removeStorageSync("status"),location.reload()};return(m,b)=>(e(),r("div",ts,[n("div",ss,[i(t).finalize?(e(),r(f,{key:1},[hs,i(a).total>0?(e(),r(f,{key:0},[n("div",ks,[ys,n("strong",null,S(i(a).total)+" preguntas",1),bs,n("strong",ms,S(i(a).oksPercentage)+"% de aciertos",1),$s]),i(a).errors>0?(e(),r(f,{key:0},[Ss,n("div",ws,[(e(!0),r(f,null,F(i(t).result,(T,L)=>(e(),r("div",{class:P(["px-3 bg-light ma-1 floatcard",T?"isok":"notok"])},[n("button",{class:"bg-clear ma-1",onClick:v=>_(L)},S(u(L)),9,xs)],2))),256))])],64)):g("",!0)],64)):(e(),r(f,{key:1},[],64)),Ls,i(c)?g("",!0):(e(),r(f,{key:2},[Cs,n("button",{class:"important",onClick:x},"Reiniciar")],64))],64)):(e(),r(f,{key:0},[i(p).unansweredLength?(e(),r(f,{key:0},[n("div",as,[n("span",null,[ns,n("strong",null,S(i(p).total)+" preguntas",1),os,n("strong",ls,S(i(p).unansweredLength)+" sin contestar",1),rs])]),(e(!0),r(f,null,F(i(p).unanswered,(T,L)=>(e(),r("button",{class:"high ma-1",onClick:v=>_(L)},S(u(L)),9,cs))),256)),i(c)?g("",!0):(e(),r(f,{key:0},[is,us,n("div",{class:"my-4"},[n("button",{class:"important",onClick:w},"Finalizar")])],64))],64)):i(p).total>0?(e(),r("div",ds,vs)):(e(),r("div",ps,gs))],64))])]))}};const ue=s=>(ae("data-v-0af9ee72"),s=s(),ne(),s),As={class:"stepsNavigation"},zs=["disabled"],Ms=z("navigate_before"),Ds=ue(()=>n("span",{class:"txt"},"Anterior",-1)),Os=["disabled"],Is=ue(()=>n("span",{class:"txt"},"Siguiente",-1)),Ns=z("navigate_next"),Fs={props:{steps:{type:Number,required:!0}},setup(s,{emit:l}){const t=s,a=y("statusFile");O(0);const o=c=>{(c==-1&&a.value.step>0||c==1&&a.value.step<t.steps-1)&&(a.value.step+=c,l("stepChanged"))};return(c,u)=>(e(),r("div",As,[n("button",{onClick:u[0]||(u[0]=_=>o(-1)),disabled:i(a).step==0},[A(j,null,{default:M(()=>[Ms]),_:1}),Ds],8,zs),(e(!0),r(f,null,F(s.steps,(_,p)=>(e(),r("div",{class:P(["step",[i(a).step==p?"active":"non-active"]])},null,2))),256)),n("button",{onClick:u[1]||(u[1]=_=>o(1)),disabled:i(a).step==s.steps-1},[Is,A(j,null,{default:M(()=>[Ns]),_:1})],8,Os)]))}};var Ps=B(Fs,[["__scopeId","data-v-0af9ee72"]]);const js={key:0,class:"activityScreenTitle"},Bs={props:{screenindex:{type:Number},screen:{type:Object,required:!0}},setup(s){const l=s,t=y("view"),a=O(),o=y("statusFile"),c=G(()=>({})),u=()=>{o.value.step++},_=p=>t.value?!0:l.screen.steps?o.value.step==p:!0;return le(()=>o.value.step,(p,w)=>{a.value.$el.scrollTop>0&&(a.value.$el.scrollTop=0)}),(p,w)=>{const x=oe("perfect-scrollbar");return e(),r("div",{class:P(["activityScreen",i(t)?"desplegado":""]),style:U(i(c))},[i(t)?(e(),r("div",js,S(s.screen.title),1)):g("",!0),A(x,{ref_key:"scroll",ref:a},{default:M(()=>[s.screen.end?X((e(),C(Ts,{key:1},null,512)),[[Y,s.screen.end]]):(e(!0),r(f,{key:0},F(s.screen.blocks,(m,b)=>(e(),C(J,{name:"slide"},{default:M(()=>[X(A(es,{block:m,onStepNext:u,onScreenNext:w[0]||(w[0]=T=>p.$emit("screenNext",T)),blockid:s.screenindex+"-"+b},null,8,["block","blockid"]),[[Y,_(b)]])]),_:2},1024))),256))]),_:1},512),s.screen.steps&&!i(t)?(e(),C(Ps,{key:1,steps:s.screen.blocks.length},null,8,["steps"])):g("",!0)],6)}}};var Es=B(Bs,[["__scopeId","data-v-3104b0ab"]]);const Hs={setup(s){const l=y("view"),t=y("activityFile"),a=y("statusFile"),o=u=>{a.value.step=0,a.value.screen+=u},c=u=>l.value?!0:u==a.value.screen;return(u,_)=>(e(),C(J,{name:"zoom"},{default:M(()=>[n("section",{class:P(["Activity",i(l)?"desplegado":""])},[(e(!0),r(f,null,F(i(t).screens,(p,w)=>X((e(),C(Es,{key:w,screen:p,onScreenNext:o,screenindex:w},null,8,["screen","screenindex"])),[[Y,c(w)]])),128))],2)]),_:1}))}};const Rs={setup(s){const l=y("activityFile"),t=y("statusFile"),a=o=>{t.value.state=o};return(o,c)=>i(l)&&i(t)?(e(),r(f,{key:0},[i(t).state=="@intro"?(e(),C(Ae,{key:0,onStart:c[0]||(c[0]=u=>a("@activity"))})):i(t).state=="@activity"?(e(),r(f,{key:1},[A(ht),A(Hs)],64)):g("",!0)],64)):g("",!0)}};function qs(s){var l=ve.generate(s||"-");const t=l.toDataUrl();var a=document.createElement("style");a.type="text/css",a.innerHTML="#app {background-image: "+t+";}",document.getElementsByTagName("head")[0].appendChild(a)}var Vs={buildBG:qs};const q=["color: #446699","background: #ddff99","font-size: 9px","padding: 2px 5px","border-radius: 4px"].join(";"),Js=ke();H();var N=pe(Rs);N.config.globalProperties.emitter=Js;N.use(fe);N.use(ge);gsap.registerPlugin(Draggable);N.provide("view",O(!1));Us();function Gs(s){try{JSON.parse(s)}catch{return!1}return!0}async function Us(){const s=window.location.search,l=new URLSearchParams(s),t=l.get("test"),a=l.get("blocked"),o=l.get("oda"),c=l.get("status");t!=null?(console.log("%c%s",q,"::TestMode"),N.provide("test",!0)):N.provide("test",!1),a!=null?(console.log("%c%s",q,"::BLOCKED"),N.provide("blocked",!0)):N.provide("blocked",!1);const _=O({state:"@intro",screen:0,step:0,answers:{},result:{},finalize:!1}),p=O({total:0,oks:0,errors:0,oksPercentage:0,errorsPercentage:0});if(N.provide("resultsFile",p),o)try{const x=K(o+"_"),m=await he.get("./odas/"+o+"/oda.json"),b=m.data;N.provide("activityFile",b),Vs.buildBG(m.data.id),N.provide("statusFile",_),N.mount("#app");const T=x.getStorageSync("status");if(T){const v=Z.atob(T);if(!v)return!1;const $=JSON.parse(v);if(!$)return!1;_.value=$,console.log("%c%s",q,"::LoadedData")}if(c!=null&&c.length>4){const v=Z.atob(c);if(!v)return!1;if(Gs(v)){const $=JSON.parse(v);if(!$)return!1;_.value=$,console.log("%c%s",q,"::UrlData")}else console.log("%c%s",q,"::WRONG UrlData")}const L=Q.throttle(function(v,$){const I=Z.btoa(JSON.stringify(v.value));x.setStorageSync("status",I);const E={status:I,results:_.value.finalize?p.value:null};var W=JSON.stringify(E);window.top.postMessage(W,"*")},2e3);le(()=>_,(v,$)=>{if(a!=null)return!1;L(v,$)},{deep:!0}),document.title=b.id+" | "+b.title,t&&(document.title="::TEST:: "+b.id+" | "+b.title)}catch(x){console.log("%c%s",q,"::Error: "+x);var w=document.getElementById("app");w.innerHTML='<div class="erroroda">ERROR DE CARGA</div>'}else{var w=document.getElementById("app");w.innerHTML='<div class="erroroda">ODA NO ENCONTRADA</div>'}}const Ws=s=>{var l=s.data;if(typeof l=="string"){var t=JSON.parse(l);console.log("Message: ",t)}};window.addEventListener("message",Ws,!1);window.addEventListener("resize",function(){window.innerWidth<=600&&N.config.globalProperties.emitter.emit("sidebarmini")});
